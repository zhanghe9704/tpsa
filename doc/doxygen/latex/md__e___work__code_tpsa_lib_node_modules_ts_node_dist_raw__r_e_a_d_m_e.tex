The {\ttfamily dist-\/raw} directory contains JS sources that are distributed verbatim, not compiled nor typechecked via TS.

To implement ESM support, we unfortunately must duplicate some of node\textquotesingle{}s built-\/in functionality that is not exposed via an API. We have copy-\/pasted the necessary code from \href{https://github.com/nodejs/node/tree/master/lib}{\texttt{ https\+://github.\+com/nodejs/node/tree/master/lib}} then modified it to suite our needs.

Formatting may be intentionally bad to keep the diff as small as possible, to make it easier to merge upstream changes and understand our modifications. For example, when we need to wrap node\textquotesingle{}s source code in a factory function, we will not indent the function body, to avoid whitespace changes in the diff.

One obvious problem with this approach\+: the code has been pulled from one version of node, whereas users of ts-\/node run multiple versions of node. Users running node 12 may see that ts-\/node behaves like node 14, for example.\hypertarget{md__e___work__code_tpsa_lib_node_modules_ts_node_dist_raw__r_e_a_d_m_e_autotoc_md2989}{}\doxysubsection{$<$tt$>$raw$<$/tt$>$ directory}\label{md__e___work__code_tpsa_lib_node_modules_ts_node_dist_raw__r_e_a_d_m_e_autotoc_md2989}
Within the {\ttfamily raw} directory, we keep unmodified copies of the node source files. This allows us to use diffing tools to compare files in {\ttfamily raw} to those in {\ttfamily dist-\/raw}, which will highlight all of the changes we have made. Hopefully, these changes are as minimal as possible.\hypertarget{md__e___work__code_tpsa_lib_node_modules_ts_node_dist_raw__r_e_a_d_m_e_autotoc_md2990}{}\doxysubsection{Naming convention}\label{md__e___work__code_tpsa_lib_node_modules_ts_node_dist_raw__r_e_a_d_m_e_autotoc_md2990}
Not used consistently, but the idea is\+:

{\ttfamily node-\/$<$directory$>$(...-\/$<$directory$>$)-\/$<$filename$>$.js}

{\ttfamily node-\/internal-\/errors.\+js} -\/$>$ {\ttfamily github.\+com/nodejs/node/blob/\+TAG/lib/internal/errors.js}

So, take the path within node\textquotesingle{}s {\ttfamily lib/} directory, and replace slashes with hyphens.

In the {\ttfamily raw} directory, files are suffixed with the version number or revision from which they were downloaded.

If they have a {\ttfamily stripped} suffix, this means they have large chunks of code deleted, but no other modifications. This is useful when diffing. Sometimes our {\ttfamily dist-\/raw} files only have a small part of a much larger node source file. It is easier to diff {\ttfamily raw/$\ast$-\/stripped.js} against {\ttfamily dist-\/raw/$\ast$.js}. 