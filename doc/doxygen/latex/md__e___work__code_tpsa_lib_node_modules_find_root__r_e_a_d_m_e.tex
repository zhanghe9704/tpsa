recursively find the closest package.\+json

\href{https://travis-ci.org/js-n/find-root}{\texttt{ }}\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1069}{}\doxysection{usage}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1069}
Say you want to check if the directory name of a project matches its module name in package.\+json\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const path = require('path')}
\DoxyCodeLine{const findRoot = require('find-\/root')}
\DoxyCodeLine{}
\DoxyCodeLine{// from a starting directory, recursively search for the nearest}
\DoxyCodeLine{// directory containing package.json}
\DoxyCodeLine{const root = findRoot('/Users/jsdnxx/Code/find-\/root/tests')}
\DoxyCodeLine{// => '/Users/jsdnxx/Code/find-\/root'}
\DoxyCodeLine{}
\DoxyCodeLine{const dirname = path.basename(root)}
\DoxyCodeLine{console.log('is it the same?')}
\DoxyCodeLine{console.log(dirname === require(path.join(root, 'package.json')).name)}

\end{DoxyCode}


You can also pass in a custom check function (by default, it checks for the existence of {\ttfamily package.\+json} in a directory). In this example, we traverse up to find the root of a git repo\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{const fs = require('fs')}
\DoxyCodeLine{}
\DoxyCodeLine{const gitRoot = findRoot('/Users/jsdnxx/Code/find-\/root/tests', function (dir) \{}
\DoxyCodeLine{  return fs.existsSync(path.resolve(dir, '.git'))}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1070}{}\doxysection{api}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1070}
\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1071}{}\doxysubsection{$<$tt$>$find\+Root\+: (starting\+Path \+: string, check?\+: (dir\+: string) =$>$ boolean) =$>$ string$<$/tt$>$}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1071}
Returns the path for the nearest directory to {\ttfamily starting\+Path} containing a {\ttfamily package.\+json} file, eg {\ttfamily /foo/module}.

If {\ttfamily check} is provided, returns the path for the closest parent directory where {\ttfamily check} returns true.

Throws an error if no {\ttfamily package.\+json} is found at any level in the {\ttfamily starting\+Path}.\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1072}{}\doxysection{installation}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1072}

\begin{DoxyCode}{0}
\DoxyCodeLine{> npm install find-\/root}

\end{DoxyCode}
\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1073}{}\doxysection{running the tests}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1073}
From package root\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{> npm install}
\DoxyCodeLine{> npm test}

\end{DoxyCode}
\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1074}{}\doxysection{contributors}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1074}

\begin{DoxyItemize}
\item jsdnxx
\end{DoxyItemize}\hypertarget{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1075}{}\doxysection{license}\label{md__e___work__code_tpsa_lib_node_modules_find_root__r_e_a_d_m_e_autotoc_md1075}
MIT. (c) 2017 jsdnxx 